Installs `bosh-init` and all its dependencies.

## Requirements

For `bosh-init` to run, the following files should be mounted as one or several volumes.

### BOSH manifest
YAML file defining BOSH configuration details. Passed as argument to `bosh-init deploy`.

### State file
Generated by `bosh-init` to keep track of the deployed BOSH instance. It must reside in the same directoy as the BOSH manifest.

### Private key
Used by `bosh-init` to ssh to BOSH. Its path is referenced in the BOSH manifest under the key: `cloud_provider.ssh_tunnel.private_key`. It is relative to the manifest directory.

Not necessary if *ssh_tunnel* is configured with the *password* option in the BOSH manifest.

### [Optional] bosh-init cache
It contains downloads and compiled packages. Reusing it saves significant time.
Always under `/root/.bosh_init`.

## Build locally

```
$ cd bosh-init
$ docker build -t bosh-init .
```

## Run

Example:

```
$ ls -Ra docker-bosh-init-manifest/
docker-bosh-init-manifest/:
.  ..  .ssh  bosh-manifest-state.json  bosh-manifest.yml

docker-bosh-init-manifest/.ssh:
.  ..  id_rsa

$ grep private_key docker-bosh-init-manifest/bosh-manifest.yml 
    private_key: .ssh/id_rsa

# Run locally
$ docker run -v /home/ubuntu/docker-bosh-init-manifest:/docker-bosh-init-manifest \
-v /home/ubuntu:docker-bosh-init-cache:/root/.bosh_init bosh-init \
bosh-init deploy /docker-bosh-init-manifest/bosh-manifest.yml

# Run from Dockerhub image
$ docker run -v /home/ubuntu/docker-bosh-init-manifest:/docker-bosh-init-manifest \
-v /home/ubuntu:docker-bosh-init-cache:/root/.bosh_init governmentpaas/bosh-init:latest \
bosh-init deploy /docker-bosh-init-manifest/bosh-manifest.yml

```

## Caching compile of AWS CPI

The container has been preseeded with a compile of the bosh AWS CPI. If your
manifest is using the same version, this will speed things up considerably.

The version of the CPi that's cached is controller by the `BOSH_AWS_CPI_URL`
and `BOSH_AWS_CPI_CHECKSUM` variables in the `Dockerfile`, which should contain
values that match the `url` and `sha1` parameters of the bosh release.
